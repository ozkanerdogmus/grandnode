@model ProductDetailsModel
            @{ 
                int i = 0;
                int pic = 0;
            }
<div class="gallery gallery-QV col-12 col-md-4 col-lg-4 col-xl-5 mr-xl-auto px-0">
            @if (!string.IsNullOrEmpty(Model.Flag))
            {
                <span class="new-product-label">
                    @Html.Raw(Model.Flag)
                </span>
            }
        
            <div class="zoom picture-@Model.Id">
                <a title="@Model.DefaultPictureModel.Title"
                   id="main-product-img-lightbox-anchor-@Model.Id">
                    <img class="img-fluid"
                         alt="@Model.DefaultPictureModel.AlternateText"
                         src="@Model.DefaultPictureModel.FullSizeImageUrl"
                         data-fullsize="@Model.DefaultPictureModel.FullSizeImageUrl"
                         title="@Model.DefaultPictureModel.Title"
                         itemprop="image"
                         id="main-product-img-@Model.Id" />
                </a>
            </div>
            @if (!Model.DefaultPictureZoomEnabled)
            {

                <script asp-location="Footer">
                $(document).ready(function () {
                    $('.product-standard #main-product-img-lightbox-anchor-@Model.Id').attr('href', "@Model.DefaultPictureModel.FullSizeImageUrl");
                    $('.product-standard #main-product-img-lightbox-anchor-@Model.Id').magnificPopup({
                            type: 'image',
                            removalDelay: 300,
                            gallery: {
                                enabled: true,
                                tPrev: '@T("Media.MagnificPopup.Previous")',
                                tNext: '@T("Media.MagnificPopup.Next")',
                                tCounter: '@T("Media.MagnificPopup.Counter")'
                            },
                            tClose: '@T("Media.MagnificPopup.Close")',
                            tLoading: '@T("Media.MagnificPopup.Loading")'
                    });
               });
                </script>
            }
            else
            {
                <script asp-location="Footer">
                    $(document).ready(function () {
                        if ($(window).width() > 768) {
                            $('.picture-@Model.Id').zoom({
                                url: $('#main-product-img-lightbox-anchor-@Model.Id img').attr('data-fullsize')
                            });
                        }
                        $('.product-standard #main-product-img-lightbox-anchor-@Model.Id').attr('href', "@Model.DefaultPictureModel.FullSizeImageUrl");
                        $('.product-standard #main-product-img-lightbox-anchor-@Model.Id').magnificPopup({
                            type: 'image',
                            removalDelay: 300,
                            gallery: {
                                enabled: true,
                                tPrev: '@T("Media.MagnificPopup.Previous")',
                                tNext: '@T("Media.MagnificPopup.Next")',
                                tCounter: '@T("Media.MagnificPopup.Counter")'
                            },
                            tClose: '@T("Media.MagnificPopup.Close")',
                            tLoading: '@T("Media.MagnificPopup.Loading")',
                            zoom: {
                                enabled: true,
                                duration: 300,
                                opener: function (element) {
                                    return element.find('img');
                                }
                            }
                        });
                        $('.product-standard .picture-@Model.Id').on('click', function () {
                            $(".product-standard #main-product-img-lightbox-anchor-@Model.Id").click();
                        });
                    });
                </script>
            }
        
</div>
@*<script asp-location="Footer">
    $(document).ready(function () {
        $('.gallery .picture-@Model.Id').trigger('zoom.destroy');
    });
</script>*@